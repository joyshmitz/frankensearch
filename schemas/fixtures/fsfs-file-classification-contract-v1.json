{
  "kind": "fsfs_file_classification_contract_definition",
  "v": 1,
  "sniff_heuristics": {
    "max_probe_bytes": 8192,
    "binary_byte_threshold_pct": 30,
    "high_bit_ratio_threshold_pct": 60,
    "null_byte_hard_binary": true
  },
  "encoding_policy": {
    "primary_detectors": [
      "bom",
      "utf8_validation",
      "icu_heuristic"
    ],
    "normalization": "utf8_nfc",
    "unknown_encoding_action": "quarantine"
  },
  "corrupt_partial_policy": {
    "truncated_action": "index_partial_with_flag",
    "checksum_mismatch_action": "quarantine",
    "max_recovery_prefix_bytes": 16384
  },
  "confidence_signals": {
    "min_confidence_for_text": 0.8,
    "min_confidence_for_lossy_decode": 0.9,
    "emit_required_fields": [
      "classification_confidence",
      "encoding_confidence",
      "reason_code",
      "utility_penalty",
      "skip_candidate",
      "requires_manual_review"
    ]
  }
}
